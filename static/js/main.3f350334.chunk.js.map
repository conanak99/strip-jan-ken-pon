{"version":3,"sources":["model.ts","context.ts","components/ChoiceImg/ChoiceImg.tsx","screens/ChoiceScreen/ChoiceScreen.style.tsx","config.ts","screens/ChoiceScreen/ChoiceScreen.tsx","screens/ResultScreen/ResultScreen.style.tsx","screens/ResultScreen/ResultScreen.tsx","screens/VideoScreen/VideoScreen.tsx","screens/GameOverScreen/GameOverScreen.tsx","components/Video/Video.tsx","App/App.style.tsx","App/App.tsx","serviceWorker.ts","index.tsx"],"names":["GameScreen","Choice","MatchResult","ActionType","defaultState","heart","clothes","screen","CHOICE","videoNumber","defaultContextValue","state","dispatch","AppContext","React","createContext","RotatedImg","styled","img","props","size","rotate","ChoiceImg","choice","ROCK","alt","src","SCISSOR","PAPER","Container","div","Choices","ChoiceButton","button","ChoiceScreen","useContext","select","useCallback","type","map","key","onClick","BotChoice","ResultContainer","PlayerChoice","ResultScreen","botChoice","playerChoice","matchResult","next","CALCULATE","result","WIN","className","DRAW","LOSE","ButtonContainer","VideoScreen","skip","NEXT_ROUND","codes","GameOverScreen","GAME_OVER_WIN","Math","floor","random","length","GAME_OVER_LOSE","RESTART","StyledVideo","video","Preview","Video","play","onVideoEnded","videoRef","useRef","useEffect","current","console","log","currentTime","muted","ref","onEnded","playsInline","autoPlay","HeartSection","ClothesSection","audios","Audio","gameLogicReducer","action","choices","getBotChoice","getMatchResult","audio","RESULT","STRIP_VIDEO","App","useReducer","context","clothesArray","Array","fill","emptyHeart","heartArray","Provider","value","Boolean","window","location","hostname","match","ReactDOM","render","StrictMode","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister","catch","error","message"],"mappings":"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","file":"static/js/main.3f350334.chunk.js","sourcesContent":["export enum GameScreen {\n    CHOICE,\n    RESULT,\n    STRIP_VIDEO,\n    GAME_OVER_LOSE,\n    GAME_OVER_WIN,\n}\n\nexport enum Choice {\n    ROCK = 0,\n    PAPER = 1,\n    SCISSOR = 2,\n}\n\nexport enum MatchResult {\n    WIN,\n    LOSE,\n    DRAW,\n}\n\nexport interface GameState {\n    heart: number\n    clothes: number\n\n    screen: GameScreen\n    videoNumber: number\n\n    playerChoice?: Choice\n    botChoice?: Choice\n    matchResult?: MatchResult\n}\n\nexport enum ActionType {\n    CHOICE,\n    CALCULATE,\n\n    NEXT_ROUND,\n    RESTART,\n}\n\nexport type Action =\n    | {\n          type: ActionType.CHOICE\n          choice: Choice\n      }\n    | {type: ActionType.NEXT_ROUND}\n    | {type: ActionType.RESTART}\n    | {type: ActionType.CALCULATE}\n","import {GameState, GameScreen, Action} from './model'\nimport React from 'react'\n\nconst TOTAL_CLOTHES = 4\nconst TOTAL_HEART = 4\n\nexport const defaultState: GameState = {\n    heart: TOTAL_HEART,\n    clothes: TOTAL_CLOTHES,\n    screen: GameScreen.CHOICE,\n    videoNumber: TOTAL_CLOTHES,\n}\n\nexport interface ContextValue {\n    state: GameState\n    dispatch: (action: Action) => void\n}\n\nconst defaultContextValue: ContextValue = {\n    state: defaultState,\n    dispatch: () => {},\n}\n\nexport const AppContext = React.createContext(defaultContextValue)\n","import React from 'react'\nimport styled from 'styled-components'\nimport {Choice} from '../../model'\n\nconst RotatedImg = styled.img<{rotate: number; size: number}>`\n    width: ${(props) => props.size}px;\n    height: ${(props) => props.size}px;\n    transform: rotate(${(props) => props.rotate}deg);\n`\n\nexport const ChoiceImg = ({choice, size = 120}: {choice: Choice; size?: number}) => {\n    switch (choice) {\n        case Choice.ROCK:\n            return <RotatedImg rotate={-15} size={size} alt=\"rock\" src=\"/images/icons/rock.png\" />\n        case Choice.SCISSOR:\n            return <RotatedImg rotate={-80} size={size} alt=\"paper\" src=\"/images/icons/scissor.png\" />\n        case Choice.PAPER:\n            return <RotatedImg rotate={15} size={size} alt=\"scissor\" src=\"/images/icons/paper.png\" />\n    }\n}\n","import styled from 'styled-components'\nimport {TABLET_BREAKPOINT} from '../../config'\n\nexport const Container = styled.div`\n    position: relative;\n    height: 100vh;\n`\n\nexport const Choices = styled.div`\n    position: absolute;\n    width: 100vw;\n    bottom: 10vh;\n    text-align: center;\n`\n\nexport const ChoiceButton = styled.button`\n    opacity: 0.8;\n    cursor: pointer;\n    background-color: transparent;\n    border: none;\n    transition: all 0.5s;\n\n    &:hover {\n        opacity: 1;\n        transform: translateY(-10px) scale(1.2);\n    }\n\n    ${TABLET_BREAKPOINT} {\n    }\n`\n","export const TABLET_BREAKPOINT = '@media (max-width: 768px)'\n","import React from 'react'\nimport {Choice, ActionType} from '../../model'\nimport {AppContext} from '../../context'\nimport {ChoiceImg} from '../../components/ChoiceImg/ChoiceImg'\n\nimport {Container, Choices, ChoiceButton} from './ChoiceScreen.style'\n\nexport const ChoiceScreen = () => {\n    const {dispatch} = React.useContext(AppContext)\n\n    const select = React.useCallback(\n        (choice: Choice) => {\n            dispatch({type: ActionType.CHOICE, choice})\n        },\n        [dispatch],\n    )\n\n    return (\n        <Container>\n            <Choices>\n                {[Choice.ROCK, Choice.SCISSOR, Choice.PAPER].map((choice) => (\n                    <ChoiceButton key={choice} onClick={() => select(choice)}>\n                        <ChoiceImg choice={choice} />\n                    </ChoiceButton>\n                ))}\n            </Choices>\n        </Container>\n    )\n}\n","import styled from 'styled-components'\nimport {TABLET_BREAKPOINT} from '../../config'\n\nexport const Container = styled.div`\n    height: 100vh;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    flex-direction: column;\n`\n\nexport const BotChoice = styled.div`\n    transform: rotate(180deg);\n`\nexport const ResultContainer = styled.div`\n    margin: 20px;\n    font-size: 44px;\n\n    ${TABLET_BREAKPOINT} {\n        margin: 10px;\n    }\n`\nexport const PlayerChoice = styled.div`\n    margin-bottom: 32px;\n`\n","import React from 'react'\n\nimport {AppContext} from '../../context'\nimport {ChoiceImg} from '../../components/ChoiceImg/ChoiceImg'\nimport {MatchResult, ActionType} from '../../model'\nimport {BotChoice, ResultContainer, PlayerChoice, Container} from './ResultScreen.style'\n\nexport const ResultScreen = () => {\n    const {state, dispatch} = React.useContext(AppContext)\n\n    const {botChoice, playerChoice, matchResult} = state\n\n    const next = React.useCallback(() => dispatch({type: ActionType.CALCULATE}), [dispatch])\n\n    let result: JSX.Element = <span />\n    switch (matchResult!) {\n        case MatchResult.WIN:\n            result = <span className=\"nes-text is-success\">Thắng rồi ahihi!!</span>\n            break\n        case MatchResult.DRAW:\n            result = <span className=\"nes-text is-primary\"> Hoà</span>\n            break\n        case MatchResult.LOSE:\n            result = <span className=\"nes-text is-error\"> Thua rùi lêu lêu!!</span>\n            break\n    }\n\n    return (\n        <Container>\n            <BotChoice>\n                <ChoiceImg size={140} choice={botChoice!} />\n            </BotChoice>\n\n            <ResultContainer>{result}</ResultContainer>\n\n            <PlayerChoice>\n                <ChoiceImg size={140} choice={playerChoice!} />\n            </PlayerChoice>\n\n            <button onClick={next} type=\"button\" className=\"nes-btn is-primary\">\n                Tiếp tục\n            </button>\n        </Container>\n    )\n}\n","import React from 'react'\nimport styled from 'styled-components'\n\nimport {ActionType} from '../../model'\nimport {AppContext} from '../../context'\n\nconst ButtonContainer = styled.div`\n    position: absolute;\n    width: 100vw;\n    bottom: 10vh;\n    text-align: center;\n`\n\nexport const VideoScreen = () => {\n    const {dispatch} = React.useContext(AppContext)\n\n    const skip = React.useCallback(() => {\n        dispatch({type: ActionType.NEXT_ROUND})\n    }, [dispatch])\n\n    return (\n        <ButtonContainer>\n            <button type=\"button\" className=\"nes-btn is-primary\" onClick={skip}>\n                Skip, hông thèm coi\n            </button>\n        </ButtonContainer>\n    )\n}\n","import React from 'react'\nimport styled from 'styled-components'\n\nimport {ActionType, GameScreen} from '../../model'\nimport {AppContext} from '../../context'\n\ninterface Props {\n    screen: GameScreen.GAME_OVER_WIN | GameScreen.GAME_OVER_LOSE\n}\n\nconst Container = styled.div`\n    display: flex;\n    height: 100vh;\n    align-items: center;\n    justify-content: center;\n`\n\nconst codes = [\n    'MIDE-628',\n    'MIDE-619',\n    'MIDE-589',\n    'MIDE-582',\n    'MIDE-533',\n    'MIDE-542',\n    'MIDE-448',\n    'MIDE-440',\n    'MIDE-430',\n    'AVOP-210',\n    'MIDE-777',\n    'MIDE-765',\n    'MIDE-754',\n    'MIDE-742',\n    'MIDE-730',\n    'MIDE-719',\n    'MIDE-709',\n    'OAE-140',\n    'MIDE-696',\n    'MIDE-686',\n    'MIDE-678',\n    'MIDE-670',\n    'MIDE-663',\n    'TEK-097',\n    'MIDE-645',\n    'MIDE-636',\n]\n\nfunction getRandomCode(): string {\n    return codes[Math.floor(Math.random() * codes.length)]\n}\n\nexport const GameOverScreen = ({screen}: Props) => {\n    const {dispatch} = React.useContext(AppContext)\n\n    return (\n        <Container>\n            <section className=\"message-list\">\n                <section className=\"message -left\">\n                    <i className=\"nes-octocat animate\"></i>\n\n                    <div className=\"nes-balloon from-left\">\n                        {screen === GameScreen.GAME_OVER_WIN && (\n                            <p>\n                                Chúc mừng bạn đã chiến thắng ahihi!\n                                <br /> Mã số may mắn của bạn là <i>{getRandomCode()}</i>\n                            </p>\n                        )}\n                        {screen === GameScreen.GAME_OVER_LOSE && <p>Thua rồi, nhục quá, chơi lại đi hihi!</p>}\n\n                        <button\n                            type=\"button\"\n                            className=\"nes-btn is-primary\"\n                            onClick={() => {\n                                dispatch({type: ActionType.RESTART})\n                            }}>\n                            Chơi lại\n                        </button>\n                    </div>\n                </section>\n            </section>\n        </Container>\n    )\n}\n","import React from 'react'\nimport styled from 'styled-components'\n\ninterface Props {\n    play?: boolean\n    videoNumber: number\n    onVideoEnded: () => void\n}\n\nconst StyledVideo = styled.video`\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100vw;\n    height: 100vh;\n    height: calc(var(--vh, 1vh) * 100);\n    opacity: 0.8;\n    object-fit: cover;\n    z-index: -1;\n`\n\nconst Preview = styled.img`\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100vw;\n    height: 100vh;\n    height: calc(var(--vh, 1vh) * 100);\n    opacity: 0.8;\n    object-fit: cover;\n    z-index: -1;\n`\n\nexport const Video = ({play, videoNumber, onVideoEnded}: Props) => {\n    const videoRef = React.useRef<HTMLVideoElement | null>(null)\n\n    React.useEffect(() => {\n        const video = videoRef.current\n        if (video) {\n            console.log({video})\n            video.currentTime = 0\n            // Later, sound might not work on Safari mobile due to permission\n            // Dunno why it can work now, lol\n            video.muted = false\n        }\n    }, [play, videoRef])\n\n    if (!play) {\n        return <Preview src={`/images/preview_${videoNumber}.jpg`} />\n    }\n\n    return (\n        <StyledVideo ref={videoRef as any} onEnded={onVideoEnded} playsInline autoPlay muted>\n            <source src={`/videos/${videoNumber}.mp4`} type=\"video/mp4\" />\n        </StyledVideo>\n    )\n}\n","import styled from 'styled-components'\nimport {TABLET_BREAKPOINT} from '../config'\n\nexport const Container = styled.div`\n    position: relative;\n    height: 100vh;\n`\n\nexport const HeartSection = styled.div`\n    z-index: 1;\n    position: absolute;\n    top: 5px;\n    left: 5px;\n\n    ${TABLET_BREAKPOINT} {\n        width: 40vw;\n    }\n\n    .heart {\n        width: 55px;\n        height: 55px;\n    }\n`\n\nexport const ClothesSection = styled.div`\n    z-index: 1;\n    position: absolute;\n    top: 5px;\n    right: 5px;\n    text-align: right;\n\n    ${TABLET_BREAKPOINT} {\n        width: 40vw;\n    }\n\n    .clothes {\n        width: 60px;\n        height: 60px;\n    }\n`\n","import React from 'react'\nimport {GameState, GameScreen, Choice, MatchResult, Action, ActionType} from '../model'\nimport {defaultState, ContextValue, AppContext} from '../context'\nimport {ChoiceScreen} from '../screens/ChoiceScreen/ChoiceScreen'\nimport {ResultScreen} from '../screens/ResultScreen/ResultScreen'\nimport {VideoScreen} from '../screens/VideoScreen/VideoScreen'\nimport {GameOverScreen} from '../screens/GameOverScreen/GameOverScreen'\nimport {Video} from '../components/Video/Video'\nimport {Container, ClothesSection, HeartSection} from './App.style'\n\nconst audios: Record<MatchResult, HTMLAudioElement> = {\n    [MatchResult.WIN]: new Audio('/sounds/win.mp3'),\n    [MatchResult.DRAW]: new Audio('/sounds/draw.mp3'),\n    [MatchResult.LOSE]: new Audio('/sounds/lose.mp3'),\n}\n\nfunction getBotChoice() {\n    // return Choice.PAPER // For easy testing\n\n    const choices = [Choice.PAPER, Choice.ROCK, Choice.SCISSOR]\n    return choices[Math.floor(Math.random() * choices.length)]\n}\n\nfunction getMatchResult(playerChoice: Choice, botChoice: Choice) {\n    if (playerChoice === botChoice) {\n        return MatchResult.DRAW\n    }\n\n    if (playerChoice - botChoice === 1 || playerChoice - botChoice === -2) {\n        return MatchResult.WIN\n    }\n\n    return MatchResult.LOSE\n}\n\nfunction gameLogicReducer(state: GameState, action: Action): GameState {\n    switch (action.type) {\n        case ActionType.RESTART:\n            return defaultState\n\n        case ActionType.NEXT_ROUND:\n            if (state.clothes === 0) {\n                return {...state, screen: GameScreen.GAME_OVER_WIN}\n            }\n            return {...state, videoNumber: state.clothes, screen: GameScreen.CHOICE}\n\n        case ActionType.CHOICE: {\n            const playerChoice = action.choice\n            const botChoice = getBotChoice()\n            const matchResult = getMatchResult(playerChoice, botChoice)\n            const audio = audios[matchResult]\n            audio && audio.play()\n\n            return {...state, playerChoice, botChoice, matchResult, screen: GameScreen.RESULT}\n        }\n\n        case ActionType.CALCULATE:\n            if (state.screen !== GameScreen.RESULT) {\n                return state\n            }\n\n            const matchResult = state.matchResult\n\n            switch (matchResult) {\n                case MatchResult.WIN:\n                    const clothes = state.clothes - 1\n                    return {...state, clothes, screen: GameScreen.STRIP_VIDEO}\n                case MatchResult.LOSE:\n                    const heart = state.heart - 1\n                    if (heart === 0) {\n                        return {...state, heart, screen: GameScreen.GAME_OVER_LOSE}\n                    }\n                    return {...state, heart, screen: GameScreen.CHOICE}\n                case MatchResult.DRAW:\n                    return {...state, screen: GameScreen.CHOICE}\n            }\n    }\n    return state\n}\n\nfunction App() {\n    const [state, dispatch] = React.useReducer(gameLogicReducer, defaultState)\n\n    const context: ContextValue = {\n        state,\n        dispatch,\n    }\n\n    const clothes = <img className=\"clothes\" alt=\"clothes\" src=\"/images/icons/clothes.png\" />\n    const clothesArray: JSX.Element[] = new Array(state.clothes)\n    clothesArray.fill(clothes)\n\n    const heart = <img alt=\"heart\" className=\"heart\" src=\"/images/icons/heart.png\" />\n    const emptyHeart = <img alt=\"empty-heart\" className=\"heart\" src=\"/images/icons/heart-empty.png\" />\n    const heartArray: JSX.Element[] = new Array(defaultState.heart)\n    heartArray.fill(heart, 0, state.heart)\n    heartArray.fill(emptyHeart, state.heart)\n\n    return (\n        <AppContext.Provider value={context}>\n            <Container>\n                <ClothesSection>{clothesArray}</ClothesSection>\n                <HeartSection>{heartArray}</HeartSection>\n\n                <Video\n                    play={state.screen === GameScreen.STRIP_VIDEO}\n                    videoNumber={state.videoNumber}\n                    onVideoEnded={() => dispatch({type: ActionType.NEXT_ROUND})}></Video>\n\n                {state.screen === GameScreen.CHOICE && <ChoiceScreen />}\n                {state.screen === GameScreen.RESULT && <ResultScreen />}\n                {state.screen === GameScreen.STRIP_VIDEO && <VideoScreen />}\n\n                {state.screen === GameScreen.GAME_OVER_WIN && <GameOverScreen screen={state.screen} />}\n                {state.screen === GameScreen.GAME_OVER_LOSE && <GameOverScreen screen={state.screen} />}\n            </Container>\n        </AppContext.Provider>\n    )\n}\n\nexport default App\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      process.env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport './index.css'\n\nimport App from './App/App'\nimport * as serviceWorker from './serviceWorker'\n\nReactDOM.render(\n    <React.StrictMode>\n        <App />\n    </React.StrictMode>,\n    document.getElementById('root'),\n)\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister()\n"],"sourceRoot":""}